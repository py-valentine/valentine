<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For You Cantikkuü§ç</title> 
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;700&family=Quicksand:wght@400;600&family=Caveat:wght@700&display=swap');

        :root {
            /* Tema Merah & Putih */
            --bg-color: #fee2e2; /* Red 100 */
            --accent-light: #fff5f5;
            --accent-main: #dc2626; /* Red 600 */
            --accent-dark: #991b1b; /* Red 800 */
            --text-big: #7f1d1d; /* Red 900 */
            --text-small: #b91c1c;
            --card-bg: rgba(255, 255, 255, 0.95);
        }

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden; 
            background-color: var(--bg-color);
            font-family: 'Quicksand', sans-serif;
            color: var(--accent-dark);
        }

        .font-big { font-family: 'Fredoka', sans-serif; font-weight: 700; color: var(--text-big); }
        .font-small { font-family: 'Caveat', cursive; color: var(--text-small); font-size: 20px; }
        .font-handwriting { font-family: 'Caveat', cursive; }

        .sakura-canvas {
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 10;
        }

        .page-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            text-align: center;
            z-index: 20;
            justify-content: center;
        }

        .glass-card {
            background: var(--card-bg);
            backdrop-filter: blur(8px);
            padding: 2.5rem;
            border-radius: 2rem;
            border: 4px solid white;
            box-shadow: 0 20px 25px -5px rgba(220, 38, 38, 0.1), 0 10px 10px -5px rgba(220, 38, 38, 0.04);
            max-width: 350px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        .glass-card::after {
            content: '';
            position: absolute;
            bottom: -50px; 
            left: -25%; 
            width: 150%;
            height: 230px;
            background: linear-gradient(to top, #ff1818, #fff5f5); /* Red F */
            border-radius: 50%;
            z-index: -1;
            opacity: 0.7;
        }

        .cassette-container {
            width: 100%;
            max-width: 280px;
            height: 170px;
            perspective: 1000px;
            margin: 0 auto 20px auto;
        }

        .cassette {
            width: 100%;
            height: 100%;
            background: #991b1b; /* Red 800 */
            border-radius: 12px;
            position: relative;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 10px 20px rgba(127,29,29,0.3);
            border: 2px solid #7f1d1d;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow: hidden;
        }

        .cassette-container:nth-child(1) .cassette { transform: rotateZ(-3deg); }
        .cassette-container:nth-child(2) .cassette { transform: rotateZ(2deg); }
        .cassette-container:nth-child(3) .cassette { transform: rotateZ(-1.5deg); }

        .cassette-container:hover .cassette {
            transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg) translateY(-10px);
            box-shadow: 0 20px 30px rgba(127,29,29,0.4);
            z-index: 50;
        }

        .screw {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #ef4444;
            border-radius: 50%;
            box-shadow: inset 1px 1px 2px rgba(0,0,0,0.3);
        }
        .screw.top-l { top: 8px; left: 8px; }
        .screw.top-r { top: 8px; right: 8px; }
        .screw.bot-l { bottom: 8px; left: 8px; }
        .screw.bot-r { bottom: 8px; right: 8px; }

        .cassette-label {
            width: 90%;
            height: 75%;
            background: #fff;
            margin-top: 12px;
            border-radius: 6px;
            border: 1px solid #fee2e2;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 10px;
            background-image: repeating-linear-gradient(white, white 21px, #fee2e2 22px); 
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
            position: relative;
        }

        .cassette-window {
            width: 100px;
            height: 35px;
            background: #450a0a;
            border-radius: 4px;
            margin-top: 8px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            border: 2px solid #7f1d1d;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.8);
            position: absolute;
            bottom: 15px;
        }

        .sprocket {
            width: 22px;
            height: 22px;
            background: white;
            border-radius: 50%;
            position: relative;
            animation: rotate-sprocket 4s linear infinite;
            animation-play-state: paused;
        }
        .playing .sprocket { animation-play-state: running; }

        @keyframes rotate-sprocket {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .sprocket::after {
            content: '';
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 14px; height: 14px;
            background: #450a0a;
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
        }

        .cassette-bottom {
            position: absolute;
            bottom: 0;
            width: 65%;
            height: 22px;
            background: #991b1b;
            border-top: 2px solid #7f1d1d;
            border-left: 2px solid #7f1d1d;
            border-right: 2px solid #7f1d1d;
            border-radius: 8px 8px 0 0;
        }

        .hidden-page {
            display: none !important;
        }

        .loading-bar-container {
            width: 100%;
            height: 12px;
            background: #fff;
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid var(--accent-main);
            position: relative;
            z-index: 5;
        }

        .loading-bar-fill {
            height: 100%;
            width: 0%;
            background: var(--accent-main);
            transition: width 0.1s linear;
        }

        .dot-loader span {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--accent-main);
            animation: dotFlashing 1s infinite alternate;
        }
        .dot-loader span:nth-child(2) { animation-delay: 0.2s; }
        .dot-loader span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes dotFlashing {
            0% { opacity: 0.2; }
            100% { opacity: 1; }
        }

        .typewriter {
            display: inline-block;
            overflow: hidden;
            white-space: nowrap;
            border-right: 2px solid var(--accent-dark);
            width: 0;
            animation: typing 3s steps(40, end) forwards, blink .75s step-end infinite;
        }

        @keyframes typing { from { width: 0 } to { width: 100% } }
        @keyframes blink { from, to { border-color: transparent } 50% { border-color: var(--accent-dark); } }

        .photo-grid {
            display: grid;
            grid-template-columns: 1fr; 
            gap: 20px;
            width: 100%;
            max-width: 320px;
            max-height: 55vh;
            overflow-y: auto;
            padding: 15px;
            scroll-behavior: smooth;
        }

        .photo-card {
            background: white;
            border-radius: 12px;
            padding: 10px;
            padding-bottom: 25px; 
            box-shadow: 0 4px 15px rgba(220,38,38,0.1);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            border: 1px solid #fee2e2;
        }

        .photo-card:active {
            transform: scale(0.95) rotate(-2deg);
        }

        .photo-card img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            display: block;
        }

        .photo-grid::-webkit-scrollbar { width: 4px; }
        .photo-grid::-webkit-scrollbar-thumb { background: var(--accent-main); border-radius: 10px; }
        
        .envelope-emoji {
            font-size: 8rem;
            line-height: 1;
            display: block;
            margin-bottom: 1rem;
            filter: drop-shadow(0 10px 15px rgba(127, 29, 29, 0.3));
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .reason-card {
            background: linear-gradient(to bottom, #ffffff 0%, #fee2e2 100%);
            border-radius: 1.5rem;
            padding: 2.5rem 1.5rem 1.5rem 1.5rem;
            box-shadow: 0 8px 15px -3px rgba(127, 29, 29, 0.1), 0 4px 6px -2px rgba(127, 29, 29, 0.05);
            border: 2px solid white;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 140px;  
            transition: all 0.3s ease;
        }
        
        .reason-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-main);
            box-shadow: 0 15px 20px -5px rgba(127, 29, 29, 0.2);
        }

        .reason-icon {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 45px;
            height: 45px;
            background: var(--accent-main);
            border: 4px solid white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            z-index: 10;
        }

        .btn-back {
            background: white;
            color: var(--accent-main);
            border: 2px solid var(--accent-main);
            padding: 0.5rem 1.5rem;
            border-radius: 9999px;
            font-weight: bold;
            font-size: 0.875rem;
            margin-top: 1rem;
            transition: all 0.2s;
        }
        .btn-back:hover {
            background: var(--accent-light);
        }

        .fade-in-page {
            animation: pageAppear 0.8s ease-out forwards;
        }

        @keyframes pageAppear {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(10px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
    </style>
</head>
<body>

    <canvas class="sakura-canvas" id="sakura"></canvas>
    <audio id="bg-music" loop></audio>

    <!-- HALAMAN 0: MULAI -->
    <div id="page0" class="page-container">
        <div class="glass-card">
            <img src="https://media.tenor.com/kZzow5agOnkAAAAi/flowers.gif" alt="Stiker" class="w-32 h-32 rounded-lg mb-6 relative z-10">
            <h1 class="font-big text-xl mb-2 relative z-10">Sesuatu untukmu...</h1>
            <p class="font-small text-lg mb-8 relative z-10">Klik tombol di bawah untuk surprise birthday-mu</p>
            <button onclick="initExperience()" class="bg-red-600 text-white px-10 py-3 rounded-full font-bold shadow-lg hover:scale-105 active:scale-95 transition w-full relative z-10">
                Mulai ‚ú®
            </button>
        </div>
    </div>

    <!-- HALAMAN 1: LOADING -->
    <div id="page1" class="page-container hidden-page">
        <div class="glass-card">
            <img src="https://media.tenor.com/j_kkcdrkDYEAAAAi/bella-tontonbella.gif" alt="Stiker" class="w-32 h-32 rounded-lg mb-6 relative z-10">
            <h1 class="font-big text-2xl mb-1 relative z-10">Happy Birthday</h1>
            <p class="font-small text-md mb-8 relative z-10">sedang dipersiapkan untukmu...</p>
            
            <div class="loading-bar-container mb-4">
                <div id="loader" class="loading-bar-fill"></div>
            </div>

            <div class="dot-loader space-x-2 relative z-10">
                <span></span><span></span><span></span>
            </div>
        </div>
    </div>

    <!-- HALAMAN 2: SURPRISE BIRTHDAY -->
    <div id="page2" class="page-container hidden-page">
        <div class="glass-card">
            <p class="font-small text-sm mb-2 relative z-10">Hai, aku punya sesuatu yang spesial untukmu</p>
            <h2 class="font-big text-2xl mb-6 relative z-10">Ini Hari Spesialmu!</h2>
            
            <div class="w-full p-4 bg-red-700 rounded-2xl shadow-xl text-white relative mb-8 z-10">
                <p class="text-sm italic">"Sebuah perayaan kecil betapa berartinya hidupku dengan adanya kamu."</p>
            </div>

            <div class="h-6 mb-8 relative z-10">
                <p class="typewriter text-red-700 font-semibold text-xs">Klik di bawah jika sudah siap‚ú®</p>
            </div>

            <button onclick="nextPage(3)" class="bg-red-600 text-white px-10 py-3 rounded-full font-bold shadow-lg hover:scale-105 active:scale-95 transition w-full relative z-10">
                Buka Ini! ü§ç
            </button>
        </div>
    </div>

    <!-- HALAMAN 3: CATATAN ULANG TAHUN -->
    <div id="page3" class="page-container hidden-page">
        <p class="font-small text-xl mb-1">Karena hari ini adalah hari spesialmu</p>
        <h2 class="font-big text-3xl mb-6">Birthday Note ü§ç</h2> 
        
        <div class="w-full max-w-xs p-8 bg-white rounded-3xl border-4 border-red-100 relative shadow-xl">
            <img src="https://media.tenor.com/buDL1OjJF6kAAAAj/tonton-tonton-friends.gif" class="absolute -top-5 -right-5 w-16 h-16" alt="stiker">
            
            <div id="envelope-wrapper" class="flex flex-col items-center py-6">
                <div class="envelope-emoji cursor-pointer hover:scale-110 transition-transform duration-300" onclick="openEnvelope()">üì©</div>
                <p class="text-red-700 font-bold text-lg mb-3">Klik amplopnya!</p>
                <div class="bg-red-50 border-2 border-red-100 px-6 py-2 rounded-full text-red-600 font-bold text-sm shadow-sm">
                    Pesan Spesial ü§ç
                </div>
            </div>

            <div id="letter-opened" class="hidden flex flex-col items-center">
                <div class="bg-red-50 p-4 rounded-xl text-left shadow-inner border border-white w-full mb-4">
                    <p id="type-p3" class="font-handwriting text-lg text-red-900 leading-relaxed"></p>
                    <p class="text-right mt-4 font-bold text-red-400 text-xs italic">‚Äî Ridwan</p>
                </div>
                <div class="absolute -bottom-4 -left-4 w-12 h-12">ü§ç</div>
                <div class="flex flex-col space-y-2 w-full">
                    <button id="btn-p3" onclick="nextPage(4)" class="hidden bg-red-600 text-white px-6 py-2 rounded-full font-bold text-sm shadow">Lanjut üé∂</button>
                </div>
            </div>
        </div>
        <button onclick="nextPage(2)" class="btn-back">Kembali</button>
    </div>

    <!-- HALAMAN 4: LAGU -->
    <div id="page4" class="page-container hidden-page">
        <h2 class="font-big text-2xl mb-6">Lagu yang mengingatkanku pada kamuuu</h2>
        
        <div id="cassette-list" class="w-full max-w-xs mb-8 h-[55vh] overflow-y-auto px-4 pt-4">
            
            <div class="cassette-container" onclick="playSong('https://birthdaysx.github.io/Musik/back2you.mp3', this)">
                <div class="cassette">
                    <div class="screw top-l"></div><div class="screw top-r"></div><div class="screw bot-l"></div><div class="screw bot-r"></div>
                    <div class="cassette-label">
                        <p class="font-handwriting font-bold text-red-800 text-lg leading-tight">Back 2 You</p>
                        <p class="font-handwriting text-red-500 text-sm">Rahmania Astrini</p>
                        <div class="cassette-window">
                            <div class="sprocket"></div>
                            <div class="sprocket"></div>
                        </div>
                    </div>
                    <div class="cassette-bottom"></div>
                </div>
            </div>

            <div class="cassette-container" onclick="playSong('https://birthdaysx.github.io/Musik/Indahnya-dirimu.mp3', this)">
                <div class="cassette">
                    <div class="screw top-l"></div><div class="screw top-r"></div><div class="screw bot-l"></div><div class="screw bot-r"></div>
                    <div class="cassette-label">
                        <p class="font-handwriting font-bold text-red-800 text-lg leading-tight">Indahnya Dirimu</p>
                        <p class="font-handwriting text-red-500 text-sm">Hivi</p>
                        <div class="cassette-window">
                            <div class="sprocket"></div>
                            <div class="sprocket"></div>
                        </div>
                    </div>
                    <div class="cassette-bottom"></div>
                </div>
            </div> 

            <div class="cassette-container" onclick="playSong('https://birthdaysx.github.io/Musik/far-side-of-the-moon.mp3', this)">
                <div class="cassette">
                    <div class="screw top-l"></div><div class="screw top-r"></div><div class="screw bot-l"></div><div class="screw bot-r"></div>
                    <div class="cassette-label">
                        <p class="font-handwriting font-bold text-red-800 text-lg leading-tight">Far Side Of The Moon</p>
                        <p class="font-handwriting text-red-500 text-sm">Slot Machine</p>
                        <div class="cassette-window">
                            <div class="sprocket"></div>
                            <div class="sprocket"></div>
                        </div>
                    </div>
                    <div class="cassette-bottom"></div>
                </div>
            </div>

        </div>

        <div class="flex space-x-4">
            <button onclick="nextPage(3)" class="bg-white text-red-600 border-2 border-red-600 px-8 py-3 rounded-full font-bold shadow-lg">Kembali</button>
            <button onclick="nextPage(5)" class="bg-red-600 text-white px-10 py-3 rounded-full font-bold shadow-lg">Lanjut üì∏</button>
        </div>
    </div>

    <!-- HALAMAN 5: GALERI -->
    <div id="page5" class="page-container hidden-page">
        <h2 class="font-big text-3xl mb-4">Indahnya Dirimu</h2>
        <div class="photo-grid mb-6">
            <div class="photo-card" onclick="this.style.transform='scale(1.05) rotate(1deg)'; setTimeout(()=>this.style.transform='', 400)"><img src="https://birthdaysx.github.io/Foto/z1.jpeg" alt="Kenangan 1"></div>
            <div class="photo-card" onclick="this.style.transform='scale(1.05) rotate(-1deg)'; setTimeout(()=>this.style.transform='', 400)"><img src="https://birthdaysx.github.io/Foto/z2.jpeg" alt="Kenangan 2"></div>
            <div class="photo-card" onclick="this.style.transform='scale(1.05) rotate(1deg)'; setTimeout(()=>this.style.transform='', 400)"><img src="https://birthdaysx.github.io/Foto/z3.jpeg" alt="Kenangan 3"></div>
            <div class="photo-card" onclick="this.style.transform='scale(1.05) rotate(-1deg)'; setTimeout(()=>this.style.transform='', 400)"><img src="https://birthdaysx.github.io/Foto/z4.jpeg" alt="Kenangan 4"></div>
            <div class="photo-card" onclick="this.style.transform='scale(1.05) rotate(1deg)'; setTimeout(()=>this.style.transform='', 400)"><img src="https://birthdaysx.github.io/Foto/z5.jpeg" alt="Kenangan 5"></div>
            <div class="photo-card" onclick="this.style.transform='scale(1.05) rotate(-1deg)'; setTimeout(()=>this.style.transform='', 400)"><img src="https://birthdaysx.github.io/Foto/z6.jpeg" alt="Kenangan 6"></div>
            <div class="photo-card" onclick="this.style.transform='scale(1.05) rotate(1deg)'; setTimeout(()=>this.style.transform='', 400)"><img src="https://birthdaysx.github.io/Foto/z7.jpeg" alt="Kenangan 7"></div>
            <div class="photo-card" onclick="this.style.transform='scale(1.05) rotate(-1deg)'; setTimeout(()=>this.style.transform='', 400)"><img src="https://birthdaysx.github.io/Foto/z8.jpeg" alt="Kenangan 8"></div>
            <div class="photo-card" onclick="this.style.transform='scale(1.05) rotate(1deg)'; setTimeout(()=>this.style.transform='', 400)"><img src="https://birthdaysx.github.io/Foto/z9.jpeg" alt="Kenangan 9"></div>
            <div class="photo-card" onclick="this.style.transform='scale(1.05) rotate(-1deg)'; setTimeout(()=>this.style.transform='', 400)"><img src="https://birthdaysx.github.io/Foto/z10.jpeg" alt="Kenangan 10"></div>
        </div>
        <p class="italic text-xs text-red-400 mb-4 px-10">"Gulir ke bawah untuk melihat semua keindahanmu."</p>
        <div class="flex space-x-4">
            <button onclick="nextPage(4)" class="bg-white text-red-600 border-2 border-red-600 px-8 py-3 rounded-full font-bold shadow-lg">Kembali</button>
            <button onclick="nextPage(6)" class="bg-red-600 text-white px-10 py-3 rounded-full font-bold shadow-lg">Lanjut ‚ú®</button>
        </div>
    </div>

    <!-- HALAMAN 6: MENGAPA KAMU BERARTI -->
    <div id="page6" class="page-container hidden-page">
        <h2 class="font-big text-3xl mb-1">MENGAPA KAMU BERARTI</h2>
        <p class="font-small text-lg italic mb-10">Sekilas tentang apa yang membuatmu luar biasa</p>

        <div class="w-full max-w-sm space-y-8 mb-10 overflow-y-auto max-h-[50vh] px-6 py-4">
            <div class="reason-card">
                <div class="reason-icon">‚ú®</div>
                <p class="font-bold text-red-800 text-lg mb-1">Ambis</p>
                <p class="text-xs text-red-600 italic">"Semangat dan kerja kerasmu mengejar mimpi selalu membuatku kagum dan terinspirasi setiap hari."</p>
            </div>
            
            <div class="reason-card">
                <div class="reason-icon">üçµ</div>
                <p class="font-bold text-red-800 text-lg mb-1">Matcha Holic</p>
                <p class="text-xs text-red-600 italic">"Sama seperti segelas matcha, kehadiranmu memberikan ketenangan dan rasa nyaman yang tak tergantikan."</p>
            </div>
            
            <div class="reason-card">
                <div class="reason-icon">üíñ</div>
                <p class="font-bold text-red-800 text-lg mb-1">Cantik</p> 
                <p class="text-xs text-red-600 italic">"Pesonamu bukan hanya tentang apa yang terlihat, tapi tentang bagaimana hatimu memancarkan keindahan"</p>
            </div>
            
            <div class="reason-card">
                <div class="reason-icon">ü¶Ñ</div>
                <p class="font-bold text-red-800 text-lg mb-1">Unik</p>
                <p class="text-xs text-red-600 italic">"Tidak ada satu pun orang di dunia ini yang bisa menggantikan caramu tertawa dan melihat dunia."</p>
            </div>
            
            <div class="reason-card">
                <div class="reason-icon">üí´</div>
                <p class="font-bold text-red-800 text-lg mb-1">Indah</p>
                <p class="text-xs text-red-600 italic">"Kamu adalah hal terindah yang pernah datang, mewarnai hidupku dengan cahaya yang luar biasa."</p>
            </div>
            
            <div class="reason-card">
                <div class="reason-icon">ü•∞</div>
                <p class="font-bold text-red-800 text-lg mb-1">Kesayangan</p>
                <p class="text-xs text-red-600 italic">" meskipun kita baru mau memulai, semoga kamu jadikan akuu orang yang kamu paling sayanggg"</p>
            </div>
        </div>

        <div class="flex space-x-4">
            <button onclick="nextPage(5)" class="bg-white text-red-600 border-2 border-red-600 px-8 py-3 rounded-full font-bold shadow-lg">Kembali</button>
            <button onclick="nextPage(7)" class="bg-red-600 text-white px-10 py-3 rounded-full font-bold shadow-lg">Lanjut üíå</button>
        </div>
    </div>

    <!-- HALAMAN 7: HALAMAN AKHIR -->
    <div id="page7" class="page-container hidden-page">
        <h2 class="font-big text-2xl mb-6">Happy Birthday My Love!</h2>
        
        <div id="final-box" class="w-full max-w-xs p-6 bg-white rounded-2xl border-2 border-red-100 shadow-xl">
            <h3 class="font-bold text-red-800 text-sm mb-3">Birthday Love Letterüíå</h3>
            <div class="bg-red-50 p-4 rounded-xl border border-white text-left mb-6 h-28 overflow-y-auto">
                <p id="type-p7" class="text-xs text-red-900 italic leading-relaxed"></p>
            </div>

            <div class="flex justify-between items-center">
                <button onclick="nextPage(6)" class="text-red-400 font-bold text-xs hover:underline">kembali</button>
                <button onclick="sealIt()" class="bg-red-600 text-white px-6 py-2 rounded-full font-bold text-xs shadow-md">Segel Pesan üíå</button>
            </div>
        </div>

        <div id="seal-loading" class="hidden flex flex-col items-center mt-8">
            <div class="text-4xl animate-bounce text-red-600">üíå</div>
            <p class="font-big text-xl text-red-800">Menyegel ini dengan cinta</p>
        </div>

        <div id="final-sent" class="hidden w-full max-w-xs p-8 bg-white rounded-3xl border-4 border-red-100 shadow-2xl flex flex-col items-center">
            <div class="text-5xl mb-4 text-red-600">ü§ç</div>
            <h2 class="font-big text-3xl text-red-800 mb-1">Terkirim dengan Cinta</h2>
            <p class="font-small text-red-400 text-sm mb-6">Hanya Untukmu</p>
            <div class="flex space-x-1 text-xl mb-6 text-red-600">ü§çü§çü§çü§çü§çü§çü§ç</div>
            <div class="text-center text-red-900 space-y-1 mb-8">
                <p class="font-bold text-md">From Ridwan</p>
                <p class="text-[10px] opacity-70">20 February 2026</p>
            </div>
            <button onclick="location.reload()" class="bg-white text-red-600 border-2 border-red-600 px-8 py-2 rounded-full font-bold text-sm">lihat lagi ‚ú®</button>
        </div>
    </div>
 
    <script>
        const canvas = document.getElementById('sakura'); 
        const ctx = canvas.getContext('2d');
        let petals = [];

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        class Petal {
            constructor() {
                this.reset();
            }
            reset() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height - canvas.height;
                this.size = Math.random() * 5 + 5;
                this.speed = Math.random() * 1 + 0.5;
                this.angle = Math.random() * Math.PI * 2;
                this.spin = Math.random() * 0.05 - 0.025;
                this.horizontalSpeed = Math.random() * 1 - 0.5;
                const redVal = 220 + Math.random() * 35;
                const greenVal = 50 + Math.random() * 100;
                const blueVal = 50 + Math.random() * 100;
                this.color = `rgba(${redVal}, ${greenVal}, ${blueVal}, ${0.4 + Math.random() * 0.6})`;
            }
            update() {
                this.y += this.speed;
                this.x += Math.sin(this.angle) * 0.5 + this.horizontalSpeed;
                this.angle += this.spin;
                if (this.y > canvas.height + 20) {
                    this.reset();
                }
            }
            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.angle);
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.ellipse(0, 0, this.size, this.size * 0.6, 0, 0, Math.PI * 2);
                ctx.fill();
                ctx.strokeStyle = "rgba(255, 255, 255, 0.4)";
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(-this.size, 0);
                ctx.lineTo(this.size, 0);
                ctx.stroke();
                ctx.restore();
            }
        }

        for (let i = 0; i < 60; i++) petals.push(new Petal());

        function animateSakura() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            petals.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(animateSakura);
        }
        animateSakura();

        const audio = document.getElementById('bg-music');
        const defaultSong = 'https://birthdaysx.github.io/Musik/kota-ini.mp3';

        function initExperience() {
            document.getElementById('page0').classList.add('hidden-page');
            const p1 = document.getElementById('page1'); p1.classList.remove('hidden-page'); p1.classList.add('fade-in-page');
            
            audio.src = defaultSong;
            audio.play().catch(err => console.log("Audio play failed"));

            const loader = document.getElementById('loader');
            let w = 0;
            const t = setInterval(() => {
                if (w >= 100) {
                    clearInterval(t);
                    setTimeout(() => nextPage(2), 500);
                } else {
                    w += 1;
                    loader.style.width = w + '%';
                }
            }, 30);
        }

        function playSong(url, element) {
            document.querySelectorAll('.cassette').forEach(c => c.classList.remove('playing'));
            element.querySelector('.cassette').classList.add('playing');
            audio.src = url;
            audio.play();
        }

        function nextPage(n) {
            document.querySelectorAll('.page-container').forEach(p => {
                p.classList.add('hidden-page');
                p.classList.remove('fade-in-page'); 
            });

            const targetPage = document.getElementById('page' + n);
            targetPage.classList.remove('hidden-page');
            
            void targetPage.offsetWidth; 
            targetPage.classList.add('fade-in-page');

            if (n === 7) {
                startTypewriterP7();
            }
        }

        function openEnvelope() {
            document.getElementById('envelope-wrapper').classList.add('hidden');
            document.getElementById('letter-opened').classList.remove('hidden');
            
            const txt = "detik ini, jam ini, hari ini, tepat seseorang yang sempurna dilahirkan ke dunia ini, happy birthday khevi magdalena sabuinü´∂üèª";
            const target = document.getElementById('type-p3'); 
            target.innerHTML = ""; 
            let i = 0;
            
            function type() {
                if (i < txt.length) {
                    target.innerHTML += txt.charAt(i);
                    i++;
                    setTimeout(type, 50);
                } else {
                    document.getElementById('btn-p3').classList.remove('hidden');
                }
            }
            setTimeout(type, 500);
        }

        function startTypewriterP7() {
            const txt = "haii cantikkk, harii ini adalah hari special kamuu, hari dimna keinginan dan perjuangan kamu bisa tercapai, semoga kamu bisa dapatkan yang kamu mau yahh, tahun ini semoga juga tahun yang berpihak samaaaaa kamuu, apapun perjuangan kamu sebelumnya kamuu sudah hebatt, dan aaku bangga, semoga kita cepat ketemu yahhh, tungguu aku pulangg ke bandung yah cintakuuu, sekali lagi happy birthday my loveeeü´∂üèª";
            const target = document.getElementById('type-p7');
            target.innerHTML = ""; 
            let i = 0;
            
            function type() {
                if (i < txt.length) {
                    target.innerHTML += txt.charAt(i);
                    i++;
                    target.parentElement.scrollTop = target.parentElement.scrollHeight;
                    setTimeout(type, 40);
                }
            }
            setTimeout(type, 800);
        }

        function sealIt() {
            document.getElementById('final-box').classList.add('hidden');
            document.getElementById('seal-loading').classList.remove('hidden');
            
            setTimeout(() => {
                document.getElementById('seal-loading').classList.add('hidden');
                document.getElementById('final-sent').classList.remove('hidden');
                
                const d = new Date();
                const opt = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                document.getElementById('date-display').innerText = d.toLocaleDateString('id-ID', opt);
            }, 3000);
        }
    </script>
</body>
</html>